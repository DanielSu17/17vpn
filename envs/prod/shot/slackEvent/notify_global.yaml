### service: the third square bracket on opsgenie
# ex: #6958: [Datadog] [Triggered] [publishably] High Latency,
# service is publishably
### regex: you can add a (?i) at the beginning of the pattern to make it case insensitive.
alertMsgRules:
  - service: publishably
    regex: ".*"
    msg: |
      @here
      - *Subject*:   
            This is an alert notification regarding `ably` high latency.
      - *Affected functionality*:
            [Android/iOS/Web] 
            The functions of Comment, gift, barrage, poke, marquee, entrance animation, etc. in live streaming room may experience delay or be unable to display.
      <!subteam^S0280LZPHNF> has been notified and is working to resolve the situation as quickly as possible.
      Thank you for your understanding and cooperation.
      --
      @here
      - *主題*:
            `ably` high latency alert 通知
      - *受影響的功能*:
            [Android/iOS/Web] 
            直播間內的留言、送禮、彈幕、poke、跑馬燈、進場動畫等功能會出現延遲或無法顯示。
      已通知 <!subteam^S0280LZPHNF> 盡快處理。
      謝謝您的理解和配合。
    closeMsg: ably high latency alert closed
  - service: Send Gift/VoteGift API
    regex: ".*/api/v1/lives/:livestreamid/gift.*"
    msg: |
      @here
      - *Subject*:   
            This is an alert notification regarding `Send Gift API` high latency.
      - *Affected functionality*:
            [Android/iOS/Web] 
            The functions of gift in live streaming room may experience delay or be unable to display.
      <!subteam^S0280LZPHNF> has been notified and is working to resolve the situation as quickly as possible.
      Thank you for your understanding and cooperation.
      --
      @here
      - *主題*:
            `Send Gift API` high latency alert 通知
      - *受影響的功能*:
            [Android/iOS/Web]
            直播間內的送禮功能會出現延遲或無法顯示:
                  直播間送禮: 送一般禮
      已通知 <!subteam^S0280LZPHNF> 盡快處理。
      謝謝您的理解和配合。
    closeMsg: Send Gift API high latency alert closed
  - service: Send Gift/VoteGift API
    regex: ".*/api/v1/lives/:livestreamid/votegift.*"
    msg: |
      @here
      - *Subject*:   
            This is an alert notification regarding `Send VoteGift API` high latency.
      - *Affected functionality*:
            [Android/iOS/Web] 
            The functions of gift in live streaming room may experience delay or be unable to display.
      <!subteam^S0280LZPHNF> has been notified and is working to resolve the situation as quickly as possible.
      Thank you for your understanding and cooperation.
      --
      @here
      - *主題*:
            `Send VoteGift API` high latency alert 通知
      - *受影響的功能*:
            [Android/iOS/Web]
            直播間內的送禮功能會出現延遲或無法顯示:
                  直播間送禮: 送投票禮
      已通知 <!subteam^S0280LZPHNF> 盡快處理。
      謝謝您的理解和配合。
    closeMsg: Send VoteGift API high latency alert closed

metricRules:
  - ably:
      enable: true
      regex: "High Latency"
      queryString: "sum:pubnub.ably.err{dd_env:k8sprod} by {internalcode,statuscode}.as_count()"
      threshold: 0

channelID:
  - "C0GPCSBSB" # global-dev-bugs
